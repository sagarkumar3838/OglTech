# Running on Localhost - Complete Guide

## Yes! You can run this application on localhost with `ai_only` mode! üöÄ

This guide will help you run the Skill Evaluation Platform on your local machine in **under 10 minutes**.

## What is `ai_only` Mode?

```env
RAG_STRATEGY=ai_only
```

This means:
- ‚úÖ **All questions generated by AI** (no question bank needed)
- ‚úÖ **Simpler setup** (no need to seed question bank)
- ‚úÖ **Maximum variety** (every evaluation is unique)
- ‚úÖ **Perfect for localhost testing**

## Quick Setup (3 Methods)

### Method 1: Automated Setup Wizard (Easiest)

```bash
# 1. Install dependencies
npm run install:all

# 2. Run setup wizard
npm run setup:localhost

# Follow the prompts to enter:
# - Firebase Project ID
# - Firebase API Key
# - At least one AI provider API key

# 3. Enable Firebase services (see below)

# 4. Add sample career (see below)

# 5. Run the app
npm run dev:server  # Terminal 1
npm run dev:client  # Terminal 2
```

### Method 2: Manual Setup

```bash
# 1. Install dependencies
npm run install:all

# 2. Copy localhost template
cp .env.localhost .env

# 3. Edit .env with your values
# (See detailed instructions below)

# 4. Update .firebaserc with your project ID

# 5. Enable Firebase services

# 6. Add sample career

# 7. Run the app
npm run dev:server  # Terminal 1
npm run dev:client  # Terminal 2
```

### Method 3: Use Both Terminals at Once

```bash
# After setup, run both servers together
npm run dev
```

This starts both backend and frontend simultaneously!

## Detailed Setup Instructions

### Step 1: Install Dependencies

```bash
npm run install:all
```

This installs:
- Root dependencies
- Client (React) dependencies
- Server (Node.js) dependencies

### Step 2: Get Firebase Configuration

1. Go to https://console.firebase.google.com/
2. Create a new project (or use existing)
3. Go to Project Settings (gear icon)
4. Scroll to "Your apps"
5. Click web icon (`</>`) to add web app
6. Copy the configuration values

### Step 3: Get AI Provider API Key

Choose **at least ONE**:

#### Option A: OpenAI (Recommended)
- Go to https://platform.openai.com/api-keys
- Create new secret key
- Copy key (starts with `sk-`)
- Cost: ~$0.10 per evaluation

#### Option B: Groq (Free Tier)
- Go to https://console.groq.com/
- Create API key
- Copy key (starts with `gsk_`)
- Cost: Free tier available, ultra fast!

#### Option C: Google Gemini (Free Tier)
- Go to https://makersuite.google.com/app/apikey
- Create API key
- Copy key
- Cost: Free tier available

### Step 4: Create .env File

Create `.env` in root directory:

```env
# Firebase Configuration
VITE_FIREBASE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789012
VITE_FIREBASE_APP_ID=1:123456789012:web:abcdef123456

# API URL (replace 'your-project-id')
VITE_API_URL=http://localhost:5001/your-project-id/us-central1/api

# AI Provider (choose one or more)
OPENAI_API_KEY=sk-your-actual-key-here
OPENAI_MODEL=gpt-4-turbo-preview

# RAG Configuration - AI ONLY MODE
RAG_ENABLED=true
RAG_STRATEGY=ai_only
RAG_QUESTION_BANK_PERCENTAGE=0

# Rate Limiting - DISABLED for localhost
RATE_LIMIT_ENABLED=false

# Application
NODE_ENV=development
PORT=5001
```

### Step 5: Update Firebase Project ID

Edit `.firebaserc`:

```json
{
  "projects": {
    "default": "your-actual-project-id"
  }
}
```

### Step 6: Enable Firebase Services

#### Enable Authentication
1. Firebase Console ‚Üí Authentication
2. Click "Get started"
3. Enable "Email/Password"
4. Click "Save"

#### Enable Firestore
1. Firebase Console ‚Üí Firestore Database
2. Click "Create database"
3. Select "Start in **test mode**" (for localhost)
4. Choose location
5. Click "Enable"

### Step 7: Add Sample Career

Go to Firebase Console ‚Üí Firestore Database:

1. Click "Start collection"
2. Collection ID: `careers`
3. Click "Next"
4. Document ID: (auto-generate)
5. Add fields:

```
name (string): "OGL Content Developer"
description (string): "Frontend developer specializing in web content"
created_at (string): "2026-01-20T00:00:00.000Z"
```

6. Add array field `skills`:
```
skills (array):
  [0] (map):
    name (string): "HTML"
    level (string): "Intermediate"
  [1] (map):
    name (string): "CSS"
    level (string): "Intermediate"
  [2] (map):
    name (string): "JavaScript"
    level (string): "Intermediate"
```

7. Click "Save"

### Step 8: Run the Application

Open **two terminal windows**:

**Terminal 1 - Backend:**
```bash
npm run dev:server
```

Expected output:
```
‚úî  functions[us-central1-api]: http function initialized
ü§ñ AI Provider Manager initialized with 1 provider(s):
   Priority order: openai
```

**Terminal 2 - Frontend:**
```bash
npm run dev:client
```

Expected output:
```
  VITE v5.1.4  ready in 500 ms
  ‚ûú  Local:   http://localhost:3000/
```

**Or run both together:**
```bash
npm run dev
```

### Step 9: Test the Application

1. Open browser: http://localhost:3000
2. Click "Sign Up"
3. Enter email: `test@example.com`
4. Enter password: `password123`
5. Click "Sign Up"
6. Go to "Careers"
7. Click "OGL Content Developer"
8. Select "HTML" ‚Üí "Intermediate"
9. Wait for AI to generate questions (10-30 seconds)
10. Answer questions
11. Submit evaluation
12. View scorecard!

## How It Works on Localhost

```
Browser (localhost:3000)
    ‚îÇ
    ‚îÇ HTTP Requests
    ‚ñº
Express Server (localhost:5001)
    ‚îÇ
    ‚îú‚îÄ‚Üí Rate Limiter: DISABLED ‚úì
    ‚îú‚îÄ‚Üí Authentication: Firebase Auth
    ‚îî‚îÄ‚Üí RAG Service: ai_only mode
            ‚îÇ
            ‚îî‚îÄ‚Üí AI Provider Manager
                    ‚îÇ
                    ‚îú‚îÄ‚Üí Try OpenAI
                    ‚îÇ   ‚îú‚îÄ‚Üí [SUCCESS] Return questions
                    ‚îÇ   ‚îî‚îÄ‚Üí [FAIL] Try next provider
                    ‚îÇ
                    ‚îú‚îÄ‚Üí Try Groq (if configured)
                    ‚îÇ   ‚îú‚îÄ‚Üí [SUCCESS] Return questions
                    ‚îÇ   ‚îî‚îÄ‚Üí [FAIL] Try next provider
                    ‚îÇ
                    ‚îî‚îÄ‚Üí Continue until success
```

## Configuration Explained

### AI Only Mode
```env
RAG_STRATEGY=ai_only
```
- All questions generated by AI
- No question bank needed
- Perfect for localhost testing

### Rate Limiting Disabled
```env
RATE_LIMIT_ENABLED=false
```
- Unlimited requests for testing
- No rate limit errors

### Development Mode
```env
NODE_ENV=development
```
- Detailed error messages
- Hot reload enabled
- Debug logging

## Troubleshooting

### "No AI providers configured"

**Problem**: No API key in `.env`

**Solution**:
```env
OPENAI_API_KEY=sk-your-actual-key-here
```

Restart server:
```bash
# Stop with Ctrl+C
npm run dev:server
```

### "Firebase permission denied"

**Problem**: Firestore rules too restrictive

**Solution**: Use test mode rules

Firebase Console ‚Üí Firestore ‚Üí Rules:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

‚ö†Ô∏è **Only for localhost testing!**

### "Cannot connect to backend"

**Problem**: Wrong API URL

**Solution**: Check `.env`:
```env
VITE_API_URL=http://localhost:5001/your-project-id/us-central1/api
```

Make sure `your-project-id` matches your Firebase project ID.

### "Port already in use"

**Problem**: Port 5001 or 3000 already taken

**Solution**: Kill the process or change port

Change port in `.env`:
```env
PORT=5002
```

### Questions taking too long

**Problem**: Slow AI provider

**Solution**: Use Groq (fastest)
```env
GROQ_API_KEY=gsk_your-key-here
AI_PROVIDER_PRIORITY=groq
```

### TypeScript errors

**Problem**: Type compilation issues

**Solution**: Check types
```bash
npm run type-check
```

## Testing Checklist

- [ ] Backend starts without errors
- [ ] Frontend starts without errors
- [ ] Can access http://localhost:3000
- [ ] Can sign up with email/password
- [ ] Can see careers list
- [ ] Can click on a career
- [ ] Can select skill and level
- [ ] Questions generate successfully
- [ ] Can answer questions
- [ ] Can submit evaluation
- [ ] Can view scorecard
- [ ] Scorecard shows correct data

## Features Available on Localhost

‚úÖ **AI-powered question generation** (ai_only mode)
‚úÖ **Multiple AI providers** with automatic fallback
‚úÖ **TypeScript** for type safety
‚úÖ **React frontend** with modern UI
‚úÖ **Express backend** with Firebase
‚úÖ **Authentication** (email/password)
‚úÖ **Real-time database** (Firestore)
‚úÖ **Detailed scorecards** with AI analysis
‚úÖ **Hot reload** for instant updates
‚úÖ **No rate limiting** for easy testing

## Localhost vs Production

| Feature | Localhost | Production |
|---------|-----------|------------|
| **RAG Mode** | `ai_only` | `hybrid` (recommended) |
| **Question Bank** | Not needed | Recommended |
| **Rate Limiting** | Disabled | Enabled |
| **Firestore Rules** | Test mode | Secure rules |
| **API URL** | localhost:5001 | Cloud Functions |
| **Cost** | Per API call | Optimized with caching |
| **Setup** | Simple | More configuration |

## Adding More AI Providers

You can add multiple providers for fallback:

```env
# Primary
OPENAI_API_KEY=sk-...

# Fallback 1
GROQ_API_KEY=gsk_...

# Fallback 2
GOOGLE_API_KEY=...

# Priority order
AI_PROVIDER_PRIORITY=openai,groq,google
```

If OpenAI fails, system automatically tries Groq, then Google.

## Optional: Enable Question Bank

If you want to test the question bank on localhost:

```bash
# 1. Seed question bank
npm run seed:questions

# 2. Change strategy in .env
RAG_STRATEGY=hybrid
RAG_QUESTION_BANK_PERCENTAGE=40

# 3. Restart server
npm run dev:server
```

Now 40% questions come from bank, 60% from AI.

## Next Steps

### 1. Test All Features
- Try all three skills (HTML, CSS, JavaScript)
- Try all three levels (Basic, Intermediate, Advanced)
- Test with different AI providers

### 2. Add More Careers
Add more career paths to Firestore

### 3. Customize Questions
Modify AI prompts in:
`server/src/services/aiProviders/BaseAIProvider.ts`

### 4. Deploy to Production
When ready:
```bash
npm run deploy
```

See `DEPLOYMENT.md` for details.

## Quick Commands

```bash
# Setup
npm run install:all              # Install dependencies
npm run setup:localhost          # Run setup wizard

# Development
npm run dev                      # Run both servers
npm run dev:server               # Run backend only
npm run dev:client               # Run frontend only

# Building
npm run build                    # Build everything
npm run type-check               # Check TypeScript

# Seeding
npm run seed:questions           # Seed question bank

# Deployment
npm run deploy                   # Deploy to Firebase
```

## Documentation

- **LOCALHOST_SETUP.md** - Detailed localhost guide
- **START_LOCALHOST.md** - Quick reference
- **QUICK_START.md** - 10-minute setup
- **RAG_GUIDE.md** - RAG system details
- **FEATURES.md** - Complete feature list
- **ARCHITECTURE.md** - System architecture
- **DEPLOYMENT.md** - Production deployment

## Support

If you need help:

1. Check terminal output for errors
2. Check browser console (F12)
3. Verify `.env` configuration
4. Check Firebase Console
5. Review documentation files

## Summary

You can absolutely run this application on localhost with `ai_only` mode!

**What you get:**
- ‚úÖ Full-featured skill evaluation platform
- ‚úÖ AI-powered question generation
- ‚úÖ Multiple AI provider support
- ‚úÖ Automatic fallback on failure
- ‚úÖ TypeScript for reliability
- ‚úÖ Modern React UI
- ‚úÖ No question bank needed
- ‚úÖ Simple setup
- ‚úÖ Fast development cycle

**Perfect for:**
- Local development
- Testing new features
- Trying different AI providers
- Learning the codebase
- Prototyping

**Start evaluating skills on localhost now! üöÄ**
